# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  heroku: circleci/heroku@2.0.0
# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  # Below is the definition of your job to build and test your app, you can rename and customize it as you want.
  testing:
    machine: true
    steps:
        - checkout
        - run: 
            name: Testing
            command: echo "this is the test job"
  build-deploy:
    machine: true
    steps:
        - checkout
        - run: 
            name: Deploy heroku
            command: | 
                set -x 
                heroku container:login
                heroku container:push -a web-api21hcb
                heroku container:release -a web-api21hcb
# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  sample: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    jobs:
      - testing
      - build-deploy
